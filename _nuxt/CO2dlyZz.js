import{s as h}from"./DwGgh1ta.js";import{s as w}from"./cw1-IybD.js";import{s as N}from"./CK5sq8FH.js";import{r,j as k,o as I,H as P,t as C,x as s,z as a,A as n,v as V,y as l,B as d,I as T}from"./jykpb-BB.js";import{S as E}from"./D02pscyA.js";import{_ as B}from"./B2zNiE2t.js";import"./BQ_-CV98.js";import"./QNJklsmX.js";import"./RrR6u7xM.js";import"./C9cwVu9l.js";import"./Amjqfl51.js";const O={class:"rsvp-page p-4"},F={class:"w-full text-6xl font-bold h-48 bg-primary flex items-center justify-center text-white"},G={class:"flex items-center text-sm text-gray-600"},J={class:"flex items-center text-sm text-gray-600 mt-1"},j={class:"text-xl font-semibold"},$={class:"flex justify-between w-full"},A={class:"flex flex-col items-center p-4"},ee={__name:"rsvp",setup(H){const m=P(),o=r({}),f=r(!1),i=r([]),g=r(null),p=r(null),c=r(null),b=k(()=>{var t,e;return((t=c.value)==null?void 0:t.response)===!0?"Guest Information":((e=c.value)==null?void 0:e.response)===!1?"Decline Reason":"RSVP Response"});I(()=>{const t=sessionStorage.getItem("singlePartyEvent");t?(o.value=JSON.parse(t),o.value.date=new Date(o.value.date)):m.push("/single-party/access-code");const e=sessionStorage.getItem("savedGuests");e&&(i.value=JSON.parse(e));const u=sessionStorage.getItem("singlePartyRsvp");u&&(g.value=JSON.parse(u))});function x(t){if(!t)return"Date not available";try{const e=t instanceof Date?t:new Date(t);return isNaN(e.getTime())?"Invalid date":new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).format(e)}catch(e){return console.error("Error formatting date:",e),"Error formatting date"}}function S(t){c.value=t}function R(){m.push("/single-party/employee-details")}function D(){const t=p.value.getFormattedRsvpData();sessionStorage.setItem("singlePartyRsvp",JSON.stringify(t)),t.attending&&t.guest&&(i.value.some(e=>e.firstName===t.guest.firstName&&e.lastName===t.guest.lastName)||(i.value.push(t.guest),sessionStorage.setItem("savedGuests",JSON.stringify(i.value)))),m.push("/single-party/summary")}return(t,e)=>{const u=N,v=w,_=h;return V(),C("div",O,[e[8]||(e[8]=s("h1",{class:"text-2xl font-bold mb-6"},"Event RSVP",-1)),a(E,{steps:["Access Code","Find Employee","Details","RSVP","Summary"],currentStep:4}),a(u,{class:"mb-6"},{header:n(()=>[s("div",F,l(o.value.name),1)]),title:n(()=>[d(l(o.value.name),1)]),subtitle:n(()=>[s("div",G,[e[2]||(e[2]=s("i",{class:"pi pi-calendar mr-2"},null,-1)),d(" "+l(x(o.value.date)),1)]),s("div",J,[e[3]||(e[3]=s("i",{class:"pi pi-map-marker mr-2"},null,-1)),d(" "+l(o.value.location),1)])]),content:n(()=>[s("p",null,l(o.value.description),1)]),_:1}),a(u,null,{title:n(()=>[s("h2",j,l(b.value),1)]),content:n(()=>[a(B,{ref_key:"rsvpFormRef",ref:p,"event-name":o.value.name,"event-id":o.value.id,"current-step":t.currentStep,"saved-guests":i.value,"previous-rsvp":g.value,onRsvpDataChange:S},{"form-controls":n(()=>[s("div",$,[a(v,{label:"Back to Details",icon:"pi pi-arrow-left",onClick:R,class:"p-button-secondary"}),e[4]||(e[4]=s("div",{class:"flex-grow"},null,-1)),a(v,{disabled:!(p.value&&p.value.canContinueToSummary),label:"Submit RSVP",icon:"pi pi-arrow-right",iconPos:"right",onClick:D,class:"p-button-primary"},null,8,["disabled"])])]),_:1},8,["event-name","event-id","current-step","saved-guests","previous-rsvp"])]),_:1}),a(_,{visible:f.value,"onUpdate:visible":e[1]||(e[1]=y=>f.value=y),header:"Success!",modal:!0,closable:!1,style:{width:"30rem"}},{default:n(()=>[s("div",A,[e[5]||(e[5]=s("i",{class:"pi pi-check-circle text-6xl text-green-500 mb-4"},null,-1)),e[6]||(e[6]=s("h2",{class:"text-xl font-bold mb-2"},"Thank You!",-1)),e[7]||(e[7]=s("p",{class:"text-center mb-4"},"Your RSVP has been successfully submitted.",-1)),a(v,{label:"Return to Home",onClick:e[0]||(e[0]=y=>T(m).push("/")),class:"w-full"})])]),_:1},8,["visible"])])}}};export{ee as default};
