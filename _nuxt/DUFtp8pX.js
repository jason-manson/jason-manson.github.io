import{s as P}from"./CK5sq8FH.js";import{s as D,a as _}from"./cw1-IybD.js";import{j as I,r as f,O as B,J as c,v as d,A as v,z as S,x as o,t as R,K as b,o as G,M as A,N as O,I as $,H as J,y as N,B as V,P as j}from"./jykpb-BB.js";import{s as U}from"./DwGgh1ta.js";import{_ as E}from"./B2zNiE2t.js";import{S as T}from"./D02pscyA.js";import"./BQ_-CV98.js";import"./QNJklsmX.js";import"./RrR6u7xM.js";import"./C9cwVu9l.js";import"./Amjqfl51.js";const L={class:"flex justify-between w-full"},M={key:2,class:"flex-grow"},W={__name:"PartyRsvpDialog",props:{modelValue:{type:Boolean,default:!1},party:{type:Object,required:!0},savedGuests:{type:Array,default:()=>[]},previousRsvp:{type:Object,default:null}},emits:["update:modelValue","rsvp-complete"],setup(m,{emit:x}){const p=m,g=x,u=I({get:()=>p.modelValue,set:l=>g("update:modelValue",l)}),n=f(1),y=f(null),h=f(null);B(()=>u.value,l=>{l&&(n.value=1)});function k(l){h.value=l}function w(){n.value=4}function C(){u.value=!1}function F(){const l=y.value.getFormattedRsvpData(),t={...l,partyId:p.party.id,partyName:p.party.name};if(g("rsvp-complete",t),l.attending&&l.guest){const e=[...p.savedGuests];e.some(r=>r.firstName===l.guest.firstName&&r.lastName===l.guest.lastName)||(e.push(l.guest),localStorage.setItem("savedGuests",JSON.stringify(e)))}u.value=!1}return(l,t)=>{const e=D,r=U;return d(),c(r,{visible:u.value,"onUpdate:visible":t[2]||(t[2]=s=>u.value=s),header:m.party?`RSVP for ${m.party.name}`:"RSVP",modal:!0,"dismissable-mask":!1,closable:!1,style:{width:"50rem"},class:"p-fluid"},{footer:v(()=>[o("div",L,[n.value===4?(d(),c(e,{key:0,label:"Back",onClick:t[0]||(t[0]=s=>n.value=1),class:"p-button-secondary"})):(d(),c(e,{key:1,label:"Close",onClick:C,class:"p-button-secondary"})),n.value===4?(d(),R("div",M)):b("",!0),n.value===4?(d(),c(e,{key:3,label:"Confirm",onClick:F,class:"p-button-primary"})):b("",!0),n.value!==4?(d(),c(e,{key:4,disabled:!(y.value&&y.value.canContinueToSummary),label:"Continue to Summary",onClick:t[1]||(t[1]=s=>w()),class:"p-button-primary"},null,8,["disabled"])):b("",!0)])]),default:v(()=>[S(E,{ref_key:"rsvpFormRef",ref:y,"event-name":m.party.name,"event-id":m.party.id,"current-step":n.value,"saved-guests":m.savedGuests,"previous-rsvp":m.previousRsvp,"show-form-controls":!1,onRsvpDataChange:k},null,8,["event-name","event-id","current-step","saved-guests","previous-rsvp"])]),_:1},8,["visible","header"])}}},z={class:"party-list-page p-4"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},H={class:"flex items-center text-sm text-gray-600"},K={class:"flex items-center text-sm text-gray-600 mt-1"},Q={class:"mb-4"},X={class:"flex justify-between items-center"},Y={key:0,class:"text-sm text-gray-600"},Z={class:"flex justify-between mt-8"},pe={__name:"party-list",setup(m){const x=J(),p=f(!1),g=f(null),u=f([]),n=f([{id:1,name:"Annual Company Gala",date:new Date(2025,4,30,18,0),location:"Grand Ballroom, Downtown",description:"Join us for an evening of celebration and recognition at our annual company gala.",imageUrl:"https://placehold.co/600x400/2563eb/FFFFFF/png?text=Company+Gala",rsvpStatus:null,guestName:null},{id:2,name:"Product Launch Event",date:new Date(2025,5,15,14,0),location:"Conference Center, West Wing",description:"Be the first to see our newest product innovations and network with industry leaders.",imageUrl:"https://placehold.co/600x400/059669/FFFFFF/png?text=Product+Launch",rsvpStatus:null,guestName:null},{id:3,name:"Team Building Retreat",date:new Date(2025,6,5,9,0),location:"Mountain View Resort",description:"A fun-filled day of team building activities, workshops, and outdoor adventures.",imageUrl:"https://placehold.co/600x400/d97706/FFFFFF/png?text=Team+Building",rsvpStatus:null,guestName:null}]),y=I(()=>n.value.some(t=>t.rsvpStatus!==null));G(()=>{const t=sessionStorage.getItem("partyRsvps");if(t){const r=JSON.parse(t);n.value.forEach(s=>{const i=r.find(a=>a.partyId===s.id);i&&(s.rsvpStatus=i.attending?"Attending":"Declined",i.attending&&i.guest?s.guestName=`${i.guest.firstName} ${i.guest.lastName}`:s.guestName=null)})}const e=sessionStorage.getItem("savedGuests");e&&(u.value=JSON.parse(e))});function h(t){return new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).format(new Date(t))}function k(t){return t==="Attending"?"success":t==="Declined"?"danger":"info"}function w(t){g.value=t,p.value=!0}function C(t){if(!t)return null;const e=sessionStorage.getItem("partyRsvps");if(!e)return null;const s=JSON.parse(e).find(i=>i.partyId===t.id);return s&&s.guest&&(s.guest={...s.guest,firstName:s.guest.firstName||"",lastName:s.guest.lastName||"",email:s.guest.email||"",dietaryNeeds:s.guest.dietaryNeeds||null}),s||null}function F(t){return{1:"#2563eb",2:"#059669",3:"#d97706"}[t]||"#6366f1"}function l(t){const e=n.value.findIndex(s=>s.id===t.partyId);e!==-1&&(n.value[e].rsvpStatus=t.attending?"Attending":"Declined",t.attending&&t.guest?(n.value[e].guestName=`${t.guest.firstName} ${t.guest.lastName}`,u.value.some(s=>s.firstName===t.guest.firstName&&s.lastName===t.guest.lastName)||(u.value.push(t.guest),sessionStorage.setItem("savedGuests",JSON.stringify(u.value)))):n.value[e].guestName=null);const r=n.value.map(s=>({partyId:s.id,partyName:s.name,attending:s.rsvpStatus==="Attending",guest:s.rsvpStatus==="Attending"&&s.guestName?u.value.find(i=>`${i.firstName} ${i.lastName}`===s.guestName):null}));sessionStorage.setItem("partyRsvps",JSON.stringify(r))}return(t,e)=>{const r=_,s=D,i=P;return d(),R("div",z,[e[6]||(e[6]=o("h1",{class:"text-2xl font-bold mb-6"},"Available Events",-1)),S(T,{steps:["Access Code","Find Employee","Details","Party List","Summary"],currentStep:4}),e[7]||(e[7]=o("p",{class:"mb-4"},"Please RSVP to the events you would like to attend:",-1)),o("div",q,[(d(!0),R(A,null,O(n.value,a=>(d(),c(i,{key:a.id,class:"party-card"},{header:v(()=>[o("div",{class:"w-full h-48 flex items-center justify-center text-white text-2xl font-bold",style:j({backgroundColor:F(a.id)})},N(a.name),5)]),title:v(()=>[V(N(a.name),1)]),subtitle:v(()=>[o("div",H,[e[3]||(e[3]=o("i",{class:"pi pi-calendar mr-2"},null,-1)),V(" "+N(h(a.date)),1)]),o("div",K,[e[4]||(e[4]=o("i",{class:"pi pi-map-marker mr-2"},null,-1)),V(" "+N(a.location),1)])]),content:v(()=>[o("p",Q,N(a.description),1),a.rsvpStatus?(d(),c(r,{key:0,value:a.rsvpStatus,severity:k(a.rsvpStatus)},null,8,["value","severity"])):b("",!0)]),footer:v(()=>[o("div",X,[S(s,{label:a.rsvpStatus?"Update RSVP":"RSVP",onClick:ee=>w(a)},null,8,["label","onClick"]),a.rsvpStatus==="Attending"&&a.guestName?(d(),R("div",Y,[e[5]||(e[5]=o("i",{class:"pi pi-user mr-1"},null,-1)),o("span",null,"Guest: "+N(a.guestName),1)])):b("",!0)])]),_:2},1024))),128))]),o("div",Z,[S(s,{label:"Back to Details",icon:"pi pi-arrow-left",onClick:e[0]||(e[0]=a=>$(x).push("/multi-party/employee-details")),class:"p-button-secondary"}),S(s,{label:"Continue to Summary",icon:"pi pi-arrow-right",iconPos:"right",onClick:e[1]||(e[1]=a=>$(x).push("/multi-party/summary")),disabled:!y.value},null,8,["disabled"])]),S(W,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=a=>p.value=a),party:g.value,savedGuests:u.value,previousRsvp:C(g.value),onRsvpComplete:l},null,8,["modelValue","party","savedGuests","previousRsvp"])])}}};export{pe as default};
