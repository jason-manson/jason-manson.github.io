import{s as $}from"./QNJklsmX.js";import{s as B}from"./C9cwVu9l.js";import{s as C}from"./RrR6u7xM.js";import{s as j}from"./cw1-IybD.js";import{s as E}from"./Amjqfl51.js";import{Q as L,r as y,j as A,O as k,t as o,v as a,K as u,x as t,z as i,M as b,N as P,R as Y,y as d,B as c,S as q}from"./jykpb-BB.js";var T={name:"Dropdown",extends:B,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}};const W={class:"rsvp-form"},z={key:0,class:"step-container"},M={class:"mb-4"},K={class:"flex gap-4"},Q={key:1,class:"step-container mt-6"},H={class:"mb-4"},J={class:"flex gap-4"},X={key:0},Z={key:0},_={key:0,class:"mb-4"},ee={class:"flex flex-col gap-2"},se={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"field col-span-2"},ne={class:"font-medium mb-3"},le={class:"field"},oe={class:"field"},ae={class:"field"},ue={class:"field"},ie={key:2,class:"step-container mt-6"},re={class:"field"},de={key:0,class:"mt-3"},me={key:3,class:"step-container mt-6"},fe={class:"bg-gray-50 p-4 rounded-lg mb-4"},ge={class:"font-semibold mb-2"},pe={class:"mb-2"},ce={class:"mb-2"},ve={class:"list-disc pl-5 mb-2"},Ne={key:0},ye={class:"mb-2"},be={key:0},Ie={key:4,class:"mt-6 flex"},Se={__name:"RsvpForm",props:{eventName:{type:String,required:!0},eventId:{type:String,required:!0},currentStep:{type:Number,default:1},savedGuests:{type:Array,default:()=>[]},previousRsvp:{type:Object,default:null},showFormControls:{type:Boolean,default:!0}},emits:["update:currentStep","rsvp-data-change","continue-to-summary","rsvp-complete"],setup(r,{expose:V,emit:x}){const g=r,D=x,e=L({response:null,guestInfo:{hasGuest:null,firstName:"",lastName:"",email:"",dietaryNeeds:null,editingIndex:-1},declineReason:null,otherDeclineReason:""}),v=y(-1),p=y(!1),S=y([{name:"None",value:"none"},{name:"Vegetarian",value:"vegetarian"},{name:"Vegan",value:"vegan"},{name:"Gluten Free",value:"gluten-free"},{name:"Dairy Free",value:"dairy-free"},{name:"Nut Allergy",value:"nut-allergy"},{name:"Other",value:"other"}]),R=y([{name:"Schedule conflict",value:"schedule"},{name:"Out of town",value:"out-of-town"},{name:"Not interested",value:"not-interested"},{name:"Other",value:"other"}]),F=A(()=>{var l;return g.currentStep>=4||e.response===null?!1:e.response===!0?e.guestInfo.hasGuest===null?!1:e.guestInfo.hasGuest===!0?(p.value||e.guestInfo.editingIndex>=0,e.guestInfo.firstName&&e.guestInfo.lastName):!0:e.response===!1?((l=e.declineReason)==null?void 0:l.value)==="other"&&!e.otherDeclineReason?!1:!!e.declineReason:!1});k(()=>g.previousRsvp,l=>{if(l)if(e.response=l.attending,l.attending){const s=!!l.guest,m={hasGuest:s,firstName:s?l.guest.firstName:"",lastName:s?l.guest.lastName:"",email:s?l.guest.email:"",dietaryNeeds:s?l.guest.dietaryNeeds:null,editingIndex:-1};if(Object.assign(e.guestInfo,m),s&&g.savedGuests.length>0){const N=g.savedGuests.findIndex(f=>f.firstName===l.guest.firstName&&f.lastName===l.guest.lastName&&f.email===l.guest.email);N>=0&&(v.value=N,p.value=!1,e.guestInfo.editingIndex=-1)}}else{const s=l.declineReason;s?(e.declineReason=R.value.find(m=>m.value===s),s==="other"&&(e.otherDeclineReason=l.otherDeclineReason||"")):e.declineReason=null,Object.assign(e.guestInfo,{hasGuest:null,firstName:"",lastName:"",email:"",dietaryNeeds:null})}else e.response=null,e.declineReason=null,e.otherDeclineReason="",Object.assign(e.guestInfo,{hasGuest:null,firstName:"",lastName:"",email:"",dietaryNeeds:null});p.value=!1},{immediate:!0}),k(e,()=>{D("rsvp-data-change",G())},{deep:!0});function O(l,s){v.value=s,Object.assign(e.guestInfo,{...l,hasGuest:!0,editingIndex:s}),p.value=!0}function U(){Object.assign(e.guestInfo,{hasGuest:!0,firstName:"",lastName:"",email:"",dietaryNeeds:null,editingIndex:-1}),v.value=-1,p.value=!0}function G(){var l;return{eventId:g.eventId,eventName:g.eventName,attending:e.response,guest:e.response&&e.guestInfo.hasGuest&&e.guestInfo.firstName&&e.guestInfo.lastName?{firstName:e.guestInfo.firstName,lastName:e.guestInfo.lastName,email:e.guestInfo.email,dietaryNeeds:e.guestInfo.dietaryNeeds}:null,declineReason:e.response?null:e.declineReason?e.declineReason.value:null,otherDeclineReason:!e.response&&((l=e.declineReason)==null?void 0:l.value)==="other"?e.otherDeclineReason:null}}return V({rsvpData:e,canContinueToSummary:F,getFormattedRsvpData:G}),(l,s)=>{const m=E,N=j,f=C,h=T,w=$;return a(),o("div",W,[r.currentStep!==4?(a(),o("div",z,[s[13]||(s[13]=t("h3",{class:"text-lg font-semibold mb-4"},"Do you wish to RSVP to this event?",-1)),t("div",M,[t("div",K,[i(m,{modelValue:e.response,"onUpdate:modelValue":s[0]||(s[0]=n=>e.response=n),inputId:"yes-rsvp",value:!0},null,8,["modelValue"]),s[11]||(s[11]=t("label",{for:"yes-rsvp",class:"mr-4"},"Yes",-1)),i(m,{modelValue:e.response,"onUpdate:modelValue":s[1]||(s[1]=n=>e.response=n),inputId:"no-rsvp",value:!1},null,8,["modelValue"]),s[12]||(s[12]=t("label",{for:"no-rsvp"},"No",-1))])])])):u("",!0),e.response===!0&&r.currentStep!==4?(a(),o("div",Q,[t("div",H,[s[16]||(s[16]=t("h4",{class:"text-md font-semibold mb-2"},"Would you like to bring a guest?",-1)),t("div",J,[i(m,{modelValue:e.guestInfo.hasGuest,"onUpdate:modelValue":s[2]||(s[2]=n=>e.guestInfo.hasGuest=n),inputId:"yes-guest",value:!0},null,8,["modelValue"]),s[14]||(s[14]=t("label",{for:"yes-guest",class:"mr-4"},"Yes",-1)),i(m,{modelValue:e.guestInfo.hasGuest,"onUpdate:modelValue":s[3]||(s[3]=n=>e.guestInfo.hasGuest=n),inputId:"no-guest",value:!1},null,8,["modelValue"]),s[15]||(s[15]=t("label",{for:"no-guest"},"No",-1))])]),e.guestInfo.hasGuest!==null?(a(),o("div",X,[e.guestInfo.hasGuest?(a(),o("div",Z,[r.savedGuests.length>0?(a(),o("div",_,[s[17]||(s[17]=t("label",{class:"block mb-2"},"You have previously entered guest information. Would you like to:",-1)),t("div",ee,[(a(!0),o(b,null,P(r.savedGuests,(n,I)=>(a(),o("div",{key:I,class:"mb-1"},[i(N,{label:`Bring ${n.firstName} ${n.lastName}`,onClick:Re=>O(n,I),class:Y([v.value===I?"p-button-primary":"p-button-outlined","w-full"])},null,8,["label","onClick","class"])]))),128)),i(N,{label:"Add a different guest",onClick:s[4]||(s[4]=n=>U()),class:"p-button-secondary"})])])):u("",!0),r.savedGuests.length===0||p.value||v.value!==-1?(a(),o("div",se,[t("div",te,[t("h4",ne,d(e.guestInfo.editingIndex>=0?"Edit Guest Information":"Add New Guest"),1)]),t("div",le,[s[18]||(s[18]=t("label",{for:"guestFirstName",class:"block mb-1"},[c("First Name "),t("span",{class:"text-red-500"},"*")],-1)),i(f,{id:"guestFirstName",modelValue:e.guestInfo.firstName,"onUpdate:modelValue":s[5]||(s[5]=n=>e.guestInfo.firstName=n),class:"w-full"},null,8,["modelValue"])]),t("div",oe,[s[19]||(s[19]=t("label",{for:"guestLastName",class:"block mb-1"},[c("Last Name "),t("span",{class:"text-red-500"},"*")],-1)),i(f,{id:"guestLastName",modelValue:e.guestInfo.lastName,"onUpdate:modelValue":s[6]||(s[6]=n=>e.guestInfo.lastName=n),class:"w-full"},null,8,["modelValue"])]),t("div",ae,[s[20]||(s[20]=t("label",{for:"guestEmail",class:"block mb-1"},"Email",-1)),i(f,{id:"guestEmail",modelValue:e.guestInfo.email,"onUpdate:modelValue":s[7]||(s[7]=n=>e.guestInfo.email=n),class:"w-full"},null,8,["modelValue"])]),t("div",ue,[s[21]||(s[21]=t("label",{for:"guestDietaryNeeds",class:"block mb-1"},"Dietary Requirements",-1)),i(h,{id:"guestDietaryNeeds",modelValue:e.guestInfo.dietaryNeeds,"onUpdate:modelValue":s[8]||(s[8]=n=>e.guestInfo.dietaryNeeds=n),options:S.value,optionLabel:"name",placeholder:"Select dietary needs",class:"w-full"},null,8,["modelValue","options"])])])):u("",!0)])):u("",!0)])):u("",!0)])):u("",!0),e.response===!1&&r.currentStep!==4?(a(),o("div",ie,[s[24]||(s[24]=t("h3",{class:"text-lg font-semibold mb-4"},"We're sorry you can't attend.",-1)),t("div",re,[s[23]||(s[23]=t("label",{for:"declineReason",class:"block mb-2"},"May we ask why you can't attend?",-1)),i(h,{id:"declineReason",modelValue:e.declineReason,"onUpdate:modelValue":s[9]||(s[9]=n=>e.declineReason=n),options:R.value,optionLabel:"name",placeholder:"Select a reason",class:"w-full mb-3"},null,8,["modelValue","options"]),e.declineReason&&e.declineReason.value==="other"?(a(),o("div",de,[s[22]||(s[22]=t("label",{for:"otherReason",class:"block mb-1"},"Please specify:",-1)),i(w,{id:"otherReason",modelValue:e.otherDeclineReason,"onUpdate:modelValue":s[10]||(s[10]=n=>e.otherDeclineReason=n),rows:"3",class:"w-full"},null,8,["modelValue"])])):u("",!0)])])):u("",!0),r.currentStep===4?(a(),o("div",me,[s[30]||(s[30]=t("h3",{class:"text-lg font-semibold mb-4"},"Please confirm your RSVP",-1)),t("div",fe,[t("h4",ge,"RSVP for "+d(r.eventName),1),t("p",pe,[s[25]||(s[25]=t("strong",null,"Attending:",-1)),c(" "+d(e.response?"Yes":"No"),1)]),e.response?(a(),o(b,{key:0},[t("p",ce,[s[26]||(s[26]=t("strong",null,"Bringing Guest:",-1)),c(" "+d(e.guestInfo.hasGuest?"Yes":"No"),1)]),e.guestInfo.hasGuest?(a(),o(b,{key:0},[s[27]||(s[27]=t("p",{class:"mb-1"},[t("strong",null,"Guest Details:")],-1)),t("ul",ve,[t("li",null,"Name: "+d(e.guestInfo.firstName)+" "+d(e.guestInfo.lastName),1),t("li",null,"Email: "+d(e.guestInfo.email),1),e.guestInfo.dietaryNeeds?(a(),o("li",Ne," Dietary Requirements: "+d(e.guestInfo.dietaryNeeds.name),1)):u("",!0)])],64)):u("",!0)],64)):(a(),o(b,{key:1},[t("p",ye,[s[28]||(s[28]=t("strong",null,"Reason for declining:",-1)),c(" "+d(e.declineReason?e.declineReason.name:"Not specified"),1)]),e.declineReason&&e.declineReason.value==="other"?(a(),o("p",be,[s[29]||(s[29]=t("strong",null,"Specified reason:",-1)),c(" "+d(e.otherDeclineReason),1)])):u("",!0)],64))])])):u("",!0),r.showFormControls?(a(),o("div",Ie,[q(l.$slots,"form-controls")])):u("",!0)])}}};export{Se as _};
